const translations: Record<string, Record<string, string>> = {
  en: {
    "nav.overview": "Overview",
    "nav.organism": "Organism",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Streams",
    "nav.telemetry": "Telemetry",
    "nav.logs": "Logs",
    "nav.wallet": "Wallet",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Investigations",
    "nav.addressbook": "Address Book",
    "nav.advisories": "Advisories",
    "nav.datalab": "Data Lab",
    "nav.lab": "Model Lab",
    "nav.guardian": "Guardian",
    "nav.cron": "Cron",
    "nav.codegraph": "Code Graph",
    "nav.integrations": "API Integrations",
    "nav.settings": "Settings",
    "nav.audiolab": "Audio Lab",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Crypto Trading AI Bot",
    "nav.stable_bank": "Stable Bank",
    "nav.total_profit": "Total Profit",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Refreshing…",
  },
  es: {
    "nav.overview": "Resumen",
    "nav.organism": "Organismo",
    "nav.pipeline": "Canalización",
    "nav.streams": "Flujos",
    "nav.telemetry": "Telemetría",
    "nav.logs": "Registros",
    "nav.wallet": "Cartera",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Investigaciones",
    "nav.addressbook": "Libreta de direcciones",
    "nav.advisories": "Avisos",
    "nav.datalab": "Laboratorio de datos",
    "nav.lab": "Laboratorio de modelos",
    "nav.guardian": "Guardián",
    "nav.cron": "Cron",
    "nav.codegraph": "Grafo de código",
    "nav.integrations": "Integraciones API",
    "nav.settings": "Configuración",
    "nav.audiolab": "Laboratorio de audio",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Bot de Trading Cripto con IA",
    "nav.stable_bank": "Banco estable",
    "nav.total_profit": "Ganancia total",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Actualizando…",
  },
  fr: {
    "nav.overview": "Vue d’ensemble",
    "nav.organism": "Organisme",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Flux",
    "nav.telemetry": "Télémétrie",
    "nav.logs": "Journaux",
    "nav.wallet": "Portefeuille",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Enquêtes",
    "nav.addressbook": "Carnet d’adresses",
    "nav.advisories": "Avis",
    "nav.datalab": "Labo de données",
    "nav.lab": "Labo de modèles",
    "nav.guardian": "Gardien",
    "nav.cron": "Cron",
    "nav.codegraph": "Graphe de code",
    "nav.integrations": "Intégrations API",
    "nav.settings": "Paramètres",
    "nav.audiolab": "Labo audio",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Bot de trading crypto IA",
    "nav.stable_bank": "Banque stable",
    "nav.total_profit": "Profit total",
    "nav.feedback": "Retour",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Actualisation…",
  },
  de: {
    "nav.overview": "Übersicht",
    "nav.organism": "Organismus",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Streams",
    "nav.telemetry": "Telemetrie",
    "nav.logs": "Protokolle",
    "nav.wallet": "Wallet",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Ermittlungen",
    "nav.addressbook": "Adressbuch",
    "nav.advisories": "Hinweise",
    "nav.datalab": "Datenlabor",
    "nav.lab": "Modelllabor",
    "nav.guardian": "Wächter",
    "nav.cron": "Cron",
    "nav.codegraph": "Code-Graph",
    "nav.integrations": "API-Integrationen",
    "nav.settings": "Einstellungen",
    "nav.audiolab": "Audiolabor",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "KI-Krypto-Trading-Bot",
    "nav.stable_bank": "Stable Bank",
    "nav.total_profit": "Gesamtgewinn",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Aktualisiere…",
  },
  it: {
    "nav.overview": "Panoramica",
    "nav.organism": "Organismo",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Flussi",
    "nav.telemetry": "Telemetria",
    "nav.logs": "Registri",
    "nav.wallet": "Portafoglio",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Indagini",
    "nav.addressbook": "Rubrica",
    "nav.advisories": "Avvisi",
    "nav.datalab": "Lab dati",
    "nav.lab": "Lab modelli",
    "nav.guardian": "Guardiano",
    "nav.cron": "Cron",
    "nav.codegraph": "Grafo del codice",
    "nav.integrations": "Integrazioni API",
    "nav.settings": "Impostazioni",
    "nav.audiolab": "Lab audio",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Bot di trading cripto IA",
    "nav.stable_bank": "Banca stabile",
    "nav.total_profit": "Profitto totale",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Aggiornamento…",
  },
  pt: {
    "nav.overview": "Visão geral",
    "nav.organism": "Organismo",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Fluxos",
    "nav.telemetry": "Telemetria",
    "nav.logs": "Logs",
    "nav.wallet": "Carteira",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Investigações",
    "nav.addressbook": "Agenda de endereços",
    "nav.advisories": "Avisos",
    "nav.datalab": "Laboratório de dados",
    "nav.lab": "Laboratório de modelos",
    "nav.guardian": "Guardião",
    "nav.cron": "Cron",
    "nav.codegraph": "Grafo de código",
    "nav.integrations": "Integrações API",
    "nav.settings": "Configurações",
    "nav.audiolab": "Laboratório de áudio",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Bot de trading cripto IA",
    "nav.stable_bank": "Banco estável",
    "nav.total_profit": "Lucro total",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Atualizando…",
  },
  "pt-br": {
    "nav.overview": "Visão geral",
    "nav.organism": "Organismo",
    "nav.pipeline": "Pipeline",
    "nav.streams": "Fluxos",
    "nav.telemetry": "Telemetria",
    "nav.logs": "Logs",
    "nav.wallet": "Carteira",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Investigações",
    "nav.addressbook": "Agenda de endereços",
    "nav.advisories": "Avisos",
    "nav.datalab": "Laboratório de dados",
    "nav.lab": "Laboratório de modelos",
    "nav.guardian": "Guardião",
    "nav.cron": "Cron",
    "nav.codegraph": "Grafo de código",
    "nav.integrations": "Integrações API",
    "nav.settings": "Configurações",
    "nav.audiolab": "Laboratório de áudio",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "Bot de trading cripto IA",
    "nav.stable_bank": "Banco estável",
    "nav.total_profit": "Lucro total",
    "nav.feedback": "Feedback",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Atualizando…",
  },
  ru: {
    "nav.overview": "Обзор",
    "nav.organism": "Организм",
    "nav.pipeline": "Пайплайн",
    "nav.streams": "Потоки",
    "nav.telemetry": "Телеметрия",
    "nav.logs": "Журналы",
    "nav.wallet": "Кошелек",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "Расследования",
    "nav.addressbook": "Адресная книга",
    "nav.advisories": "Оповещения",
    "nav.datalab": "Лаборатория данных",
    "nav.lab": "Лаборатория моделей",
    "nav.guardian": "Страж",
    "nav.cron": "Cron",
    "nav.codegraph": "Граф кода",
    "nav.integrations": "API интеграции",
    "nav.settings": "Настройки",
    "nav.audiolab": "Аудио-лаборатория",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "ИИ-бот для крипто-трейдинга",
    "nav.stable_bank": "Стабильный банк",
    "nav.total_profit": "Общая прибыль",
    "nav.feedback": "Обратная связь",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "Обновление…",
  },
  ja: {
    "nav.overview": "概要",
    "nav.organism": "オーガニズム",
    "nav.pipeline": "パイプライン",
    "nav.streams": "ストリーム",
    "nav.telemetry": "テレメトリ",
    "nav.logs": "ログ",
    "nav.wallet": "ウォレット",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "調査",
    "nav.addressbook": "アドレス帳",
    "nav.advisories": "アドバイザリ",
    "nav.datalab": "データラボ",
    "nav.lab": "モデルラボ",
    "nav.guardian": "ガーディアン",
    "nav.cron": "Cron",
    "nav.codegraph": "コードグラフ",
    "nav.integrations": "API連携",
    "nav.settings": "設定",
    "nav.audiolab": "オーディオラボ",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "暗号取引AIボット",
    "nav.stable_bank": "ステーブルバンク",
    "nav.total_profit": "総利益",
    "nav.feedback": "フィードバック",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "更新中…",
  },
  ko: {
    "nav.overview": "개요",
    "nav.organism": "오가니즘",
    "nav.pipeline": "파이프라인",
    "nav.streams": "스트림",
    "nav.telemetry": "텔레메트리",
    "nav.logs": "로그",
    "nav.wallet": "지갑",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "조사",
    "nav.addressbook": "주소록",
    "nav.advisories": "권고",
    "nav.datalab": "데이터 랩",
    "nav.lab": "모델 랩",
    "nav.guardian": "가디언",
    "nav.cron": "Cron",
    "nav.codegraph": "코드 그래프",
    "nav.integrations": "API 통합",
    "nav.settings": "설정",
    "nav.audiolab": "오디오 랩",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "암호화폐 트레이딩 AI 봇",
    "nav.stable_bank": "스테이블 뱅크",
    "nav.total_profit": "총 수익",
    "nav.feedback": "피드백",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "새로고침 중…",
  },
  "zh-hans": {
    "nav.overview": "概览",
    "nav.organism": "有机体",
    "nav.pipeline": "流水线",
    "nav.streams": "流",
    "nav.telemetry": "遥测",
    "nav.logs": "日志",
    "nav.wallet": "钱包",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "调查",
    "nav.addressbook": "地址簿",
    "nav.advisories": "通知",
    "nav.datalab": "数据实验室",
    "nav.lab": "模型实验室",
    "nav.guardian": "守护",
    "nav.cron": "Cron",
    "nav.codegraph": "代码图",
    "nav.integrations": "API 集成",
    "nav.settings": "设置",
    "nav.audiolab": "音频实验室",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "加密交易AI机器人",
    "nav.stable_bank": "稳定金库",
    "nav.total_profit": "总利润",
    "nav.feedback": "反馈",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "刷新中…",
  },
  "zh-hant": {
    "nav.overview": "概覽",
    "nav.organism": "有機體",
    "nav.pipeline": "管線",
    "nav.streams": "串流",
    "nav.telemetry": "遙測",
    "nav.logs": "日誌",
    "nav.wallet": "錢包",
    "nav.c0d3r": "c0d3r",
    "nav.investigations": "調查",
    "nav.addressbook": "通訊錄",
    "nav.advisories": "通知",
    "nav.datalab": "資料實驗室",
    "nav.lab": "模型實驗室",
    "nav.guardian": "守護",
    "nav.cron": "Cron",
    "nav.codegraph": "程式碼圖",
    "nav.integrations": "API 整合",
    "nav.settings": "設定",
    "nav.audiolab": "音訊實驗室",
    "nav.u53rxr080t": "U53RxR080T",
    "nav.branddozer": "Br∆nD D0z3r",
    "nav.subtitle": "加密交易AI機器人",
    "nav.stable_bank": "穩定金庫",
    "nav.total_profit": "總利潤",
    "nav.feedback": "回饋",
    "nav.prodmgr": "ProdMgr",
    "nav.refreshing": "重新整理中…",
  },
};

function normalizeLang(raw: string): string {
  const value = (raw || "en").toLowerCase();
  if (translations[value]) {
    return value;
  }
  if (value.includes("-")) {
    const base = value.split("-")[0];
    if (translations[base]) {
      return base;
    }
  }
  return "en";
}

export function getLanguage(): string {
  if (typeof document !== "undefined") {
    const langAttr = document.documentElement.getAttribute("lang");
    if (langAttr) return normalizeLang(langAttr);
    const root = document.getElementById("app");
    if (root?.dataset?.language) return normalizeLang(root.dataset.language);
  }
  return "en";
}

export function t(key: string): string {
  const lang = getLanguage();
  return translations[lang]?.[key] || translations.en?.[key] || key;
}
